<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farm Records - The Mountain Goat Farm</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="farm-records.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <h1>The Mountain Goat Farm - Records</h1>
            </div>
            <button class="hamburger" id="hamburger-btn" aria-label="Open navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-links">
                <li><a href="index.html">Public Site</a></li>
                <li><a href="farm-records.html" class="active">Dashboard</a></li>
                <li><a href="goat-records.html">Goat Records</a></li>
                <li><a href="breeding-records.html">Breeding Records</a></li>
                <li><a href="meat-production.html">Meat Production</a></li>
                <li><a href="products-management.html">Products</a></li>
                <li><a href="feed-schedule.html">Feed Schedule</a></li>
                <li><a href="health-records.html">Health Records</a></li>
                <li><a href="contact-management.html">Contacts</a></li>
                <li><a href="task-manager.html">Tasks</a></li>
                <li><a href="reminders.html">Reminders</a></li>
                <li><a href="financial-records.html">Financials</a></li>
                <li><a href="sales-records.html">Sales</a></li>
                <li><a href="crop-management.html">Crops</a></li>
                <li><a href="land-lease-records.html">Land Lease</a></li>
                <li><a href="machinery-equipment.html">Equipment</a></li>
                <li><a href="casual-laborers.html">Laborers</a></li>
                <li><a href="tax-records.html">Tax Records</a></li>
                <li><button id="logout-btn">Logout</button></li>
            </ul>
        </nav>
    </header>

    <!-- Login Modal -->
    <div id="login-modal" class="modal">
        <div class="modal-content">
            <div class="login-header">
                <h2>🐐 Farm Records Access</h2>
                <p>Secure access to Mountain Goat Farm management system</p>
            </div>
            
            <form id="login-form">
                <div class="input-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Enter username" required>
                </div>
                
                <div class="input-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter password" required>
                </div>
                
                <button type="submit" class="login-btn">🔓 Access Farm Records</button>
            </form>
            
            <div class="login-help">
                <div class="demo-credentials">
                    <h4>📋 Demo Credentials:</h4>
                    <div class="cred-box">
                        <strong>Username:</strong> admin<br>
                        <strong>Password:</strong> farm2024
                    </div>
                </div>
                
                <div class="quick-actions">
                    <button type="button" id="demo-login" class="demo-btn">🚀 Quick Demo Access</button>
                    <button type="button" id="auto-fill" class="auto-fill-btn">📝 Auto-fill Credentials</button>
                </div>
                
                <div class="login-info">
                    <p><strong>🔐 Secure Access:</strong> Your farm data is protected</p>
                    <p><strong>📊 Full Features:</strong> Complete farm management system</p>
                    <p><strong>💾 Auto-Save:</strong> All changes saved automatically</p>
                </div>
            </div>
        </div>
    </div>

    <main id="main-content" style="display: none;">
        <!-- Dashboard -->
        <section id="dashboard" class="dashboard-section">
            <div class="container">
                <div class="dashboard-header">
                    <h2>Farm Dashboard</h2>
                    <p class="slogan">Raising Kenya's Finest Meat Goats – Quality Breeding, Superior Genetics from the Heart of the Mountain</p>
                    <div class="breeding-focus">
                        <h3>🐐 Meat Goats – Quality Breeding, Superior Genetics 🏆</h3>
                        <p>Excellence in meat goat breeding with focus on genetic superiority, growth rates, and meat quality standards. Our newly established farm is led by experienced professionals with over 10 years of expertise in goat breeding.</p>
                    </div>
                </div>
                
                <!-- Key Performance Indicators -->
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-icon">🐐</div>
                        <div class="kpi-content">
                            <h3 id="total-goats">0</h3>
                            <p>Total Goats</p>
                            <small id="goat-growth">+0 this month</small>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon">💰</div>
                        <div class="kpi-content">
                            <h3 id="monthly-revenue">KSh 0</h3>
                            <p>Monthly Revenue</p>
                            <small id="revenue-change">+0% from last month</small>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon">📈</div>
                        <div class="kpi-content">
                            <h3 id="cash-flow">KSh 0</h3>
                            <p>Cash Flow</p>
                            <small id="cash-flow-status">Positive</small>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon">🏆</div>
                        <div class="kpi-content">
                            <h3 id="breeding-quality">A+</h3>
                            <p>Breeding Quality</p>
                            <small id="genetics-score">Superior genetics maintained</small>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon">📊</div>
                        <div class="kpi-content">
                            <h3 id="growth-rate">+15%</h3>
                            <p>Growth Rate</p>
                            <small id="performance-indicator">Above industry average</small>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon">⚠️</div>
                        <div class="kpi-content">
                            <h3 id="active-alerts">0</h3>
                            <p>Active Alerts</p>
                            <small id="alert-details">All systems normal</small>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats Grid -->
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Breeding Stock</h3>
                        <p id="breeding-stock">0 pairs</p>
                        <small>Breeding capacity</small>
                    </div>
                    <div class="dashboard-card">
                        <h3>Health Status</h3>
                        <p id="health-alerts">0</p>
                        <small>Goats needing attention</small>
                    </div>
                    <div class="dashboard-card">
                        <h3>Feed Status</h3>
                        <p id="feed-status">Good</p>
                        <small>Inventory level</small>
                    </div>
                    <div class="dashboard-card">
                        <h3>Pending Tasks</h3>
                        <p id="pending-tasks">0</p>
                        <small>Tasks due today</small>
                    </div>
                    <div class="dashboard-card">
                        <h3>Reminders Due</h3>
                        <p id="reminders-due">0</p>
                        <small>Upcoming reminders</small>
                    </div>
                    <div class="dashboard-card">
                        <h3>Breeding Alerts</h3>
                        <p id="breeding-alerts">0</p>
                        <small>Due dates approaching</small>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-section">
                    <div class="chart-container">
                        <h3>Herd Distribution</h3>
                        <canvas id="herd-chart" width="400" height="300"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Monthly Revenue</h3>
                        <canvas id="revenue-chart" width="400" height="300"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Feed Inventory</h3>
                        <canvas id="feed-chart" width="400" height="300"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Task Completion</h3>
                        <canvas id="task-chart" width="400" height="300"></canvas>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="recent-activity">
                    <h3>Recent Activity</h3>
                    <div class="activity-list" id="recent-activity-list">
                        <!-- Recent activities will be populated here -->
                    </div>
                </div>

                <!-- Urgent Alerts -->
                <div class="urgent-alerts" id="urgent-alerts">
                    <h3>🚨 Urgent Alerts</h3>
                    <div class="alert-list" id="alert-list">
                        <!-- Urgent alerts will be populated here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Goat Records -->
        <section id="goat-records" class="records-section">
            <div class="container">
                <h2>🐐 Goat Register - Premium Breeding Stock</h2>
                <div class="breeding-focus-banner">
                    <h3>Superior Genetics - Quality Breeding Stock Management</h3>
                    <p>Manage our premium meat goat breeding stock with emphasis on superior genetics, breeding quality, and performance tracking. Our experienced team with over 10 years of expertise ensures exceptional standards from our newly established farm.</p>
                </div>
                
                <!-- Controls -->
                <div class="section-controls">
                    <button id="add-goat-btn" class="btn-primary">Add New Goat</button>
                    <button id="bulk-import-btn" class="btn-secondary">Bulk Import</button>
                    <button id="export-goats-btn" class="btn-secondary">Export</button>
                    <button id="print-id-cards-btn" class="btn-secondary">Print ID Cards</button>
                </div>

                <!-- Search and Filters -->
                <div class="search-filters">
                    <input type="text" id="goat-search" placeholder="Search by ID, name, or tag number..." class="search-input">
                    <select id="goat-status-filter" class="filter-select">
                        <option value="">All Status</option>
                        <option value="alive">Alive</option>
                        <option value="sold">Sold</option>
                        <option value="dead">Dead</option>
                        <option value="breeding">Breeding</option>
                    </select>
                    <select id="goat-gender-filter" class="filter-select">
                        <option value="">All Gender</option>
                        <option value="buck">Buck</option>
                        <option value="doe">Doe</option>
                        <option value="kid">Kid</option>
                    </select>
                    <select id="goat-location-filter" class="filter-select">
                        <option value="">All Locations</option>
                        <option value="pen-1">Pen 1</option>
                        <option value="pen-2">Pen 2</option>
                        <option value="pasture-a">Pasture A</option>
                        <option value="pasture-b">Pasture B</option>
                    </select>
                </div>

                <!-- Goat Statistics -->
                <div class="goat-stats">
                    <div class="stat-card">
                        <h4>Total Goats</h4>
                        <p id="total-goats-count">0</p>
                    </div>
                    <div class="stat-card">
                        <h4>Bucks</h4>
                        <p id="buck-count">0</p>
                    </div>
                    <div class="stat-card">
                        <h4>Does</h4>
                        <p id="doe-count">0</p>
                    </div>
                    <div class="stat-card">
                        <h4>Kids</h4>
                        <p id="kid-count">0</p>
                    </div>
                    <div class="stat-card">
                        <h4>Breeding Stock</h4>
                        <p id="breeding-count">0</p>
                    </div>
                </div>

                <!-- Goat Records Table -->
                <div class="records-table">
                    <table id="goats-table">
                        <thead>
                            <tr>
                                <th>Photo</th>
                                <th>ID/Tag</th>
                                <th>Name</th>
                                <th>Gender</th>
                                <th>Breed</th>
                                <th>DOB/Age</th>
                                <th>Weight (kg)</th>
                                <th>Status</th>
                                <th>Location</th>
                                <th>QR Code</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="goats-tbody">
                            <!-- Goat records will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Breeding Records -->
        <section id="breeding-records" class="records-section">
            <div class="container">
                <h2>🏆 Breeding Records - Quality Breeding, Superior Genetics</h2>
                <div class="breeding-focus-banner">
                    <h3>Meat Goats Breeding Excellence Program</h3>
                    <p>Our breeding program focuses on superior genetics, improved growth rates, disease resistance, and exceptional meat quality characteristics. Led by experienced professionals with over 10 years of expertise in goat breeding and livestock management.</p>
                </div>
                <button id="add-breeding-record-btn" class="btn-primary">Add Breeding Record</button>
                <div class="records-table">
                    <table id="breeding-table">
                        <thead>
                            <tr>
                                <th>Breeding ID</th>
                                <th>Buck (Male)</th>
                                <th>Doe (Female)</th>
                                <th>Breeding Date</th>
                                <th>Expected Due Date</th>
                                <th>Status</th>
                                <th>Kids Born</th>
                                <th>Birth Date</th>
                                <th>Notes</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="breeding-tbody">
                            <!-- Breeding records will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Meat Production -->
        <section id="meat-production" class="records-section">
            <div class="container">
                <h2>🥩 Meat Production Records - Superior Quality Genetics</h2>
                <div class="breeding-focus-banner">
                    <h3>Premium Meat Goat Production Excellence</h3>
                    <p>Our meat production program focuses on superior genetics for exceptional meat quality, optimal growth rates, and consistent Grade A+ standards. Managed by experienced professionals with over 10 years of expertise in meat goat production.</p>
                </div>
                <button id="add-meat-record-btn" class="btn-primary">Add Production Record</button>
                <div class="records-table">
                    <table id="meat-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Goat ID</th>
                                <th>Live Weight (kg)</th>
                                <th>Carcass Weight (kg)</th>
                                <th>Meat Grade</th>
                                <th>Customer</th>
                                <th>Price (KSh)</th>
                                <th>Notes</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="meat-tbody">
                            <!-- Meat production records will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Products Management -->
        <section id="products-management" class="records-section">
            <div class="container">
                <h2>Products Management</h2>
                <button id="add-product-btn-farm" class="btn-primary">Add New Product</button>
                <div class="records-table">
                    <table id="products-table">
                        <thead>
                            <tr>
                                <th>Product Name</th>
                                <th>Category</th>
                                <th>Price</th>
                                <th>Stock</th>
                                <th>Featured</th>
                                <th>Available</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="products-tbody">
                            <!-- Products will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Feed Schedule -->
        <section id="feed-schedule" class="records-section">
            <div class="container">
                <h2>Feed Schedule</h2>
                <button id="add-feed-record-btn" class="btn-primary">Add Feed Record</button>
                <div class="records-table">
                    <table id="feed-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Time</th>
                                <th>Feed Type</th>
                                <th>Quantity</th>
                                <th>Goats Fed</th>
                                <th>Notes</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="feed-tbody">
                            <!-- Feed records will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Health Records -->
        <section id="health-records" class="records-section">
            <div class="container">
                <h2>Health Records</h2>
                <button id="add-health-record-btn" class="btn-primary">Add Health Record</button>
                <div class="records-table">
                    <table id="health-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Goat Name</th>
                                <th>Type</th>
                                <th>Description</th>
                                <th>Treatment</th>
                                <th>Vet</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="health-tbody">
                            <!-- Health records will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Contact Management -->
        <section id="contact-management" class="records-section">
            <div class="container">
                <h2>Contact Management</h2>
                <div class="contact-filters">
                    <button id="add-contact-btn" class="btn-primary">Add New Contact</button>
                    <select id="contact-filter" class="filter-select">
                        <option value="">All Contacts</option>
                        <option value="supplier">Suppliers</option>
                        <option value="customer">Customers</option>
                        <option value="veterinarian">Veterinarians</option>
                        <option value="worker">Workers</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="records-table">
                    <table id="contacts-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Category</th>
                                <th>Phone</th>
                                <th>Email</th>
                                <th>Location</th>
                                <th>Services/Products</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="contacts-tbody">
                            <!-- Contacts will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Task Manager -->
        <section id="task-manager" class="records-section">
            <div class="container">
                <h2>Task Manager</h2>
                <button id="add-task-btn" class="btn-primary">Add New Task</button>
                <div class="task-filters">
                    <select id="task-filter" class="filter-select">
                        <option value="">All Tasks</option>
                        <option value="pending">Pending</option>
                        <option value="in-progress">In Progress</option>
                        <option value="completed">Completed</option>
                        <option value="high">High Priority</option>
                    </select>
                </div>
                <div class="records-table">
                    <table id="tasks-table">
                        <thead>
                            <tr>
                                <th>Task</th>
                                <th>Category</th>
                                <th>Priority</th>
                                <th>Due Date</th>
                                <th>Assigned To</th>
                                <th>Status</th>
                                <th>Progress</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="tasks-tbody">
                            <!-- Tasks will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Reminders -->
        <section id="reminders" class="records-section">
            <div class="container">
                <h2>Reminders & Alerts</h2>
                <button id="add-reminder-btn" class="btn-primary">Add New Reminder</button>
                <div class="reminder-filters">
                    <select id="reminder-filter" class="filter-select">
                        <option value="">All Reminders</option>
                        <option value="breeding">Breeding</option>
                        <option value="health">Health</option>
                        <option value="feeding">Feeding</option>
                        <option value="general">General</option>
                    </select>
                </div>
                <div class="records-table">
                    <table id="reminders-table">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Type</th>
                                <th>Date & Time</th>
                                <th>Goat/Subject</th>
                                <th>Description</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="reminders-tbody">
                            <!-- Reminders will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Financial Records -->
        <section id="financial-records" class="records-section">
            <div class="container">
                <h2>Financial Records</h2>
                <div class="financial-tabs">
                    <button class="tab-btn active" data-tab="transactions">Transactions</button>
                    <button class="tab-btn" data-tab="profit-loss">P&L Statement</button>
                    <button class="tab-btn" data-tab="balance-sheet">Balance Sheet</button>
                    <button class="tab-btn" data-tab="breakeven">Breakeven Analysis</button>
                </div>
                
                <div id="transactions-tab" class="tab-content active">
                    <button id="add-transaction-btn" class="btn-primary">Add Transaction</button>
                    <div class="transaction-filters">
                        <select id="transaction-filter" class="filter-select">
                            <option value="">All Transactions</option>
                            <option value="income">Income</option>
                            <option value="expense">Expense</option>
                        </select>
                        <input type="date" id="date-from" class="date-filter">
                        <input type="date" id="date-to" class="date-filter">
                    </div>
                    <div class="records-table">
                        <table id="transactions-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Type</th>
                                    <th>Category</th>
                                    <th>Description</th>
                                    <th>Amount (KSh)</th>
                                    <th>Payment Method</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="transactions-tbody">
                                <!-- Transactions will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="profit-loss-tab" class="tab-content">
                    <div class="financial-summary">
                        <h3>Profit & Loss Statement</h3>
                        <div class="pl-grid">
                            <div class="pl-section">
                                <h4>Revenue</h4>
                                <p>Goat Sales: <span id="goat-sales-total">KSh 0</span></p>
                                <p>Other Income: <span id="other-income-total">KSh 0</span></p>
                                <p><strong>Total Revenue: <span id="total-revenue">KSh 0</span></strong></p>
                            </div>
                            <div class="pl-section">
                                <h4>Expenses</h4>
                                <p>Feed: <span id="feed-expenses-total">KSh 0</span></p>
                                <p>Veterinary: <span id="vet-expenses-total">KSh 0</span></p>
                                <p>Equipment: <span id="equipment-expenses-total">KSh 0</span></p>
                                <p>Other: <span id="other-expenses-total">KSh 0</span></p>
                                <p><strong>Total Expenses: <span id="total-expenses">KSh 0</span></strong></p>
                            </div>
                            <div class="pl-section">
                                <h4>Net Profit</h4>
                                <p><strong>Net Profit: <span id="net-profit">KSh 0</span></strong></p>
                                <p>Profit Margin: <span id="profit-margin">0%</span></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="balance-sheet-tab" class="tab-content">
                    <div class="financial-summary">
                        <h3>Balance Sheet</h3>
                        <div class="balance-grid">
                            <div class="balance-section">
                                <h4>Assets</h4>
                                <p>Cash: <span id="cash-assets">KSh 0</span></p>
                                <p>Livestock: <span id="livestock-assets">KSh 0</span></p>
                                <p>Equipment: <span id="equipment-assets">KSh 0</span></p>
                                <p>Feed Inventory: <span id="feed-inventory">KSh 0</span></p>
                                <p><strong>Total Assets: <span id="total-assets">KSh 0</span></strong></p>
                            </div>
                            <div class="balance-section">
                                <h4>Liabilities</h4>
                                <p>Loans: <span id="loans-liability">KSh 0</span></p>
                                <p>Accounts Payable: <span id="accounts-payable">KSh 0</span></p>
                                <p><strong>Total Liabilities: <span id="total-liabilities">KSh 0</span></strong></p>
                            </div>
                            <div class="balance-section">
                                <h4>Equity</h4>
                                <p><strong>Owner's Equity: <span id="owners-equity">KSh 0</span></strong></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="breakeven-tab" class="tab-content">
                    <div class="financial-summary">
                        <h3>Breakeven Analysis</h3>
                        <div class="breakeven-inputs">
                            <div class="input-group">
                                <label>Fixed Costs per Month (KSh):</label>
                                <input type="number" id="fixed-costs" value="0">
                            </div>
                            <div class="input-group">
                                <label>Variable Cost per Goat (KSh):</label>
                                <input type="number" id="variable-costs" value="0">
                            </div>
                            <div class="input-group">
                                <label>Average Selling Price per Goat (KSh):</label>
                                <input type="number" id="selling-price" value="0">
                            </div>
                            <button id="calculate-breakeven" class="btn-primary">Calculate Breakeven</button>
                        </div>
                        <div class="breakeven-results">
                            <h4>Results</h4>
                            <p>Breakeven Point: <span id="breakeven-units">0</span> goats per month</p>
                            <p>Breakeven Revenue: <span id="breakeven-revenue">KSh 0</span> per month</p>
                            <p>Contribution Margin: <span id="contribution-margin">KSh 0</span> per goat</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sales Records -->
        <section id="sales-records" class="records-section">
            <div class="container">
                <h2>Sales Records</h2>
                <button id="add-sale-btn" class="btn-primary">Add New Sale</button>
                <div class="sales-filters">
                    <select id="sales-filter" class="filter-select">
                        <option value="">All Sales</option>
                        <option value="goats">Goat Sales</option>
                        <option value="products">Product Sales</option>
                    </select>
                    <input type="date" id="sales-date-from" class="date-filter">
                    <input type="date" id="sales-date-to" class="date-filter">
                </div>
                <div class="records-table">
                    <table id="sales-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Item</th>
                                <th>Customer</th>
                                <th>Quantity</th>
                                <th>Unit Price (KSh)</th>
                                <th>Total (KSh)</th>
                                <th>Payment Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="sales-tbody">
                            <!-- Sales will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Crop Management -->
        <section id="crop-management" class="records-section">
            <div class="container">
                <h2>Crop Management</h2>
                <button id="add-crop-btn" class="btn-primary">Add New Crop</button>
                <div class="crop-filters">
                    <select id="crop-filter" class="filter-select">
                        <option value="">All Crops</option>
                        <option value="feed">Feed Crops</option>
                        <option value="pasture">Pasture</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="records-table">
                    <table id="crops-table">
                        <thead>
                            <tr>
                                <th>Crop Name</th>
                                <th>Type</th>
                                <th>Area (acres)</th>
                                <th>Planting Date</th>
                                <th>Expected Harvest</th>
                                <th>Status</th>
                                <th>Yield (kg)</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="crops-tbody">
                            <!-- Crops will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Reports & Export -->
        <section id="reports" class="records-section">
            <div class="container">
                <h2>Reports & Export</h2>
                
                <!-- Quick Reports -->
                <div class="report-categories">
                    <div class="report-category">
                        <h3>Livestock Reports</h3>
                        <div class="report-buttons">
                            <button class="report-btn" data-report="livestock-summary">Livestock Summary</button>
                            <button class="report-btn" data-report="breeding-report">Breeding Report</button>
                            <button class="report-btn" data-report="health-report">Health Report</button>
                            <button class="report-btn" data-report="goat-profiles">Goat Profiles</button>
                        </div>
                    </div>
                    
                    <div class="report-category">
                        <h3>Financial Reports</h3>
                        <div class="report-buttons">
                            <button class="report-btn" data-report="profit-loss">P&L Statement</button>
                            <button class="report-btn" data-report="balance-sheet">Balance Sheet</button>
                            <button class="report-btn" data-report="sales-report">Sales Report</button>
                            <button class="report-btn" data-report="expense-report">Expense Report</button>
                        </div>
                    </div>
                    
                    <div class="report-category">
                        <h3>Operational Reports</h3>
                        <div class="report-buttons">
                            <button class="report-btn" data-report="feed-report">Feed Report</button>
                            <button class="report-btn" data-report="task-report">Task Report</button>
                            <button class="report-btn" data-report="crop-report">Crop Report</button>
                            <button class="report-btn" data-report="contact-report">Contact Report</button>
                        </div>
                    </div>
                    
                    <div class="report-category">
                        <h3>Compliance Reports</h3>
                        <div class="report-buttons">
                            <button class="report-btn" data-report="tax-summary">Tax Summary</button>
                            <button class="report-btn" data-report="kra-report">KRA Report</button>
                            <button class="report-btn" data-report="audit-log">Audit Log</button>
                        </div>
                    </div>
                </div>

                <!-- Custom Report Builder -->
                <div class="custom-report-builder">
                    <h3>Custom Report Builder</h3>
                    <div class="report-builder-form">
                        <div class="form-group">
                            <label>Report Type:</label>
                            <select id="custom-report-type">
                                <option value="livestock">Livestock Data</option>
                                <option value="financial">Financial Data</option>
                                <option value="operational">Operational Data</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Date Range:</label>
                            <input type="date" id="report-date-from">
                            <input type="date" id="report-date-to">
                        </div>
                        <div class="form-group">
                            <label>Format:</label>
                            <select id="report-format">
                                <option value="pdf">PDF</option>
                                <option value="csv">CSV</option>
                                <option value="excel">Excel</option>
                            </select>
                        </div>
                        <button id="generate-custom-report" class="btn-primary">Generate Report</button>
                    </div>
                </div>

                <!-- Export Options -->
                <div class="export-options">
                    <h3>Data Export</h3>
                    <div class="export-buttons">
                        <button class="export-btn" data-export="all-data">Export All Data</button>
                        <button class="export-btn" data-export="backup">Create Backup</button>
                        <button class="export-btn" data-export="import">Import Data</button>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Add/Edit Goat Modal -->
    <!-- Enhanced Goat Profile Modal -->
    <div id="goat-modal" class="modal">
        <div class="modal-content large-modal">
            <h2 id="goat-modal-title">Add New Goat</h2>
            <form id="goat-form">
                <input type="hidden" id="goat-id">
                
                <div class="form-tabs">
                    <button type="button" class="tab-btn active" data-tab="basic">Basic Info</button>
                    <button type="button" class="tab-btn" data-tab="physical">Physical Traits</button>
                    <button type="button" class="tab-btn" data-tab="breeding">Breeding</button>
                    <button type="button" class="tab-btn" data-tab="health">Health</button>
                    <button type="button" class="tab-btn" data-tab="financial">Financial</button>
                </div>

                <!-- Basic Information Tab -->
                <div id="basic-tab" class="tab-content active">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Tag/ID Number:</label>
                            <input type="text" id="goat-tag" placeholder="e.g., MG001" required>
                        </div>
                        <div class="form-group">
                            <label>Name:</label>
                            <input type="text" id="goat-name" placeholder="Goat Name" required>
                        </div>
                        <div class="form-group">
                            <label>Gender:</label>
                            <select id="goat-gender" required>
                                <option value="">Select Gender</option>
                                <option value="buck">Buck (Male)</option>
                                <option value="doe">Doe (Female)</option>
                                <option value="kid">Kid (Young)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Date of Birth:</label>
                            <input type="date" id="goat-dob" required>
                        </div>
                        <div class="form-group">
                            <label>Breed:</label>
                            <select id="goat-breed" required>
                                <option value="">Select Breed</option>
                                <option value="boer">Boer</option>
                                <option value="kiko">Kiko</option>
                                <option value="spanish">Spanish</option>
                                <option value="nubian">Nubian</option>
                                <option value="galla">Galla</option>
                                <option value="crossbreed">Crossbreed</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Source:</label>
                            <select id="goat-source" required>
                                <option value="">Select Source</option>
                                <option value="born-on-farm">Born on Farm</option>
                                <option value="purchased">Purchased</option>
                                <option value="donated">Donated</option>
                                <option value="traded">Traded</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Location/Pen:</label>
                            <select id="goat-location" required>
                                <option value="">Select Location</option>
                                <option value="pen-1">Pen 1</option>
                                <option value="pen-2">Pen 2</option>
                                <option value="pasture-a">Pasture A</option>
                                <option value="pasture-b">Pasture B</option>
                                <option value="quarantine">Quarantine</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Status:</label>
                            <select id="goat-status" required>
                                <option value="alive">Alive</option>
                                <option value="sold">Sold</option>
                                <option value="dead">Dead</option>
                                <option value="missing">Missing</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Physical Traits Tab -->
                <div id="physical-tab" class="tab-content">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Current Weight (kg):</label>
                            <input type="number" id="goat-weight" step="0.1" placeholder="e.g., 45.5">
                        </div>
                        <div class="form-group">
                            <label>Height (cm):</label>
                            <input type="number" id="goat-height" placeholder="e.g., 75">
                        </div>
                        <div class="form-group">
                            <label>Primary Color:</label>
                            <input type="text" id="goat-color" placeholder="e.g., Brown, White, Black">
                        </div>
                        <div class="form-group">
                            <label>Markings:</label>
                            <input type="text" id="goat-markings" placeholder="e.g., White face, Black spots">
                        </div>
                        <div class="form-group">
                            <label>Horn Status:</label>
                            <select id="goat-horns">
                                <option value="">Select Horn Status</option>
                                <option value="horned">Horned</option>
                                <option value="polled">Polled (Naturally Hornless)</option>
                                <option value="disbudded">Disbudded</option>
                                <option value="dehorned">Dehorned</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ear Tag Color:</label>
                            <input type="text" id="goat-ear-tag" placeholder="e.g., Yellow, Blue">
                        </div>
                        <div class="form-group">
                            <label>Photo:</label>
                            <input type="file" id="goat-photo" accept="image/*">
                            <div id="photo-preview"></div>
                        </div>
                    </div>
                </div>

                <!-- Breeding Tab -->
                <div id="breeding-tab" class="tab-content">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Breeding Status:</label>
                            <select id="goat-breeding-status">
                                <option value="">Select Status</option>
                                <option value="available">Available for Breeding</option>
                                <option value="pregnant">Pregnant</option>
                                <option value="lactating">Lactating</option>
                                <option value="retired">Retired</option>
                                <option value="too-young">Too Young</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Sire (Father):</label>
                            <input type="text" id="goat-sire" placeholder="Father's name/ID">
                        </div>
                        <div class="form-group">
                            <label>Dam (Mother):</label>
                            <input type="text" id="goat-dam" placeholder="Mother's name/ID">
                        </div>
                        <div class="form-group">
                            <label>Total Kids Born:</label>
                            <input type="number" id="goat-kids-born" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>Expected Due Date:</label>
                            <input type="date" id="goat-due-date">
                        </div>
                        <div class="form-group">
                            <label>Breeding Notes:</label>
                            <textarea id="goat-breeding-notes" placeholder="Breeding history, performance notes"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Health Tab -->
                <div id="health-tab" class="tab-content">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Health Status:</label>
                            <select id="goat-health-status" required>
                                <option value="">Select Health Status</option>
                                <option value="healthy">Healthy</option>
                                <option value="monitoring">Monitoring</option>
                                <option value="treatment">Treatment</option>
                                <option value="quarantine">Quarantine</option>
                                <option value="recovery">Recovery</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Last Vaccination:</label>
                            <input type="date" id="goat-last-vaccination">
                        </div>
                        <div class="form-group">
                            <label>Next Vaccination Due:</label>
                            <input type="date" id="goat-next-vaccination">
                        </div>
                        <div class="form-group">
                            <label>Chronic Conditions:</label>
                            <input type="text" id="goat-conditions" placeholder="e.g., Arthritis, Parasite issues">
                        </div>
                        <div class="form-group">
                            <label>Feeding Profile:</label>
                            <textarea id="goat-feeding-profile" placeholder="Special feeding requirements, allergies"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Health Notes:</label>
                            <textarea id="goat-health-notes" placeholder="Medical history, treatments"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Financial Tab -->
                <div id="financial-tab" class="tab-content">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Purchase Price (KSh):</label>
                            <input type="number" id="goat-purchase-price" step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Current Market Value (KSh):</label>
                            <input type="number" id="goat-market-value" step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Insurance Value (KSh):</label>
                            <input type="number" id="goat-insurance-value" step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Monthly Feed Cost (KSh):</label>
                            <input type="number" id="goat-feed-cost" step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Revenue Generated (KSh):</label>
                            <input type="number" id="goat-revenue" step="0.01" placeholder="0.00" readonly>
                        </div>
                        <div class="form-group">
                            <label>Financial Notes:</label>
                            <textarea id="goat-financial-notes" placeholder="Investment notes, ROI calculations"></textarea>
                        </div>
                    </div>
                </div>

                <div class="modal-buttons">
                    <button type="submit">Save Goat</button>
                    <button type="button" id="generate-qr-code">Generate QR Code</button>
                    <button type="button" id="goat-cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Milk Record Modal -->
    <div id="milk-modal" class="modal">
        <div class="modal-content">
            <h2 id="milk-modal-title">Add Milk Record</h2>
            <form id="milk-form">
                <input type="hidden" id="milk-id">
                <input type="date" id="milk-date" required>
                <select id="milk-goat-name" required>
                    <option value="">Select Goat</option>
                </select>
                <input type="number" id="milk-morning" placeholder="Morning (litres)" step="0.1" required>
                <input type="number" id="milk-evening" placeholder="Evening (litres)" step="0.1" required>
                <textarea id="milk-notes" placeholder="Quality Notes"></textarea>
                <div class="modal-buttons">
                    <button type="submit">Save</button>
                    <button type="button" id="milk-cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Product Modal -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <h2 id="product-modal-title">Add New Product</h2>
            <form id="product-form">
                <input type="hidden" id="product-id">
                <input type="text" id="product-name" placeholder="Product Name" required>
                <select id="product-category" required>
                    <option value="">Select Category</option>
                    <option value="Dairy">Dairy</option>
                    <option value="Meat">Meat</option>
                    <option value="Fiber">Fiber</option>
                    <option value="Other">Other</option>
                </select>
                <input type="number" id="product-price" placeholder="Price" step="0.01" required>
                <input type="number" id="product-stock" placeholder="Stock Quantity" required>
                <textarea id="product-description" placeholder="Description"></textarea>
                <div class="modal-buttons">
                    <button type="submit">Save</button>
                    <button type="button" id="product-cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Feed Record Modal -->
    <div id="feed-modal" class="modal">
        <div class="modal-content">
            <h2 id="feed-modal-title">Add Feed Record</h2>
            <form id="feed-form">
                <input type="hidden" id="feed-id">
                <input type="date" id="feed-date" required>
                <input type="time" id="feed-time" required>
                <select id="feed-type" required>
                    <option value="">Select Feed Type</option>
                    <option value="Hay">Hay</option>
                    <option value="Grain">Grain</option>
                    <option value="Pellets">Pellets</option>
                    <option value="Pasture">Pasture</option>
                    <option value="Supplements">Supplements</option>
                </select>
                <input type="text" id="feed-quantity" placeholder="Quantity (kg)" required>
                <input type="text" id="feed-goats" placeholder="Goats Fed (All or specific names)" required>
                <textarea id="feed-notes" placeholder="Notes"></textarea>
                <div class="modal-buttons">
                    <button type="submit">Save</button>
                    <button type="button" id="feed-cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Health Record Modal -->
    <div id="health-modal" class="modal">
        <div class="modal-content">
            <h2 id="health-modal-title">Add Health Record</h2>
            <form id="health-form">
                <input type="hidden" id="health-id">
                <input type="date" id="health-date" required>
                <select id="health-goat-name" required>
                    <option value="">Select Goat</option>
                </select>
                <select id="health-type" required>
                    <option value="">Select Type</option>
                    <option value="Vaccination">Vaccination</option>
                    <option value="Checkup">Checkup</option>
                    <option value="Treatment">Treatment</option>
                    <option value="Injury">Injury</option>
                    <option value="Illness">Illness</option>
                </select>
                <textarea id="health-description" placeholder="Description" required></textarea>
                <textarea id="health-treatment" placeholder="Treatment"></textarea>
                <input type="text" id="health-vet" placeholder="Veterinarian">
                <select id="health-status" required>
                    <option value="">Select Status</option>
                    <option value="Completed">Completed</option>
                    <option value="Ongoing">Ongoing</option>
                    <option value="Scheduled">Scheduled</option>
                </select>
                <div class="modal-buttons">
                    <button type="submit">Save</button>
                    <button type="button" id="health-cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Product Modal (Farm Records) -->
    <div id="product-modal-farm" class="modal">
        <div class="modal-content">
            <h2 id="product-modal-title-farm">Add New Product</h2>
            <form id="product-form-farm">
                <input type="hidden" id="product-id-farm">
                <input type="text" id="product-name-farm" placeholder="Product Name" required>
                <select id="product-category-farm" required>
                    <option value="">Select Category</option>
                    <option value="dairy">Dairy</option>
                    <option value="skincare">Skincare</option>
                    <option value="meat">Meat</option>
                    <option value="other">Other</option>
                </select>
                <input type="text" id="product-price-farm" placeholder="Price (e.g., KSh 350/litre)" required>
                <textarea id="product-description-farm" placeholder="Product Description" required></textarea>
                <input type="url" id="product-image-farm" placeholder="Image URL (optional)">
                <input type="text" id="product-stock-farm" placeholder="Stock Status" required>
                <label>
                    <input type="checkbox" id="product-featured-farm"> Featured Product
                </label>
                <label>
                    <input type="checkbox" id="product-available-farm" checked> Available for Sale
                </label>
                <div class="modal-buttons">
                    <button type="submit">Save</button>
                    <button type="button" id="product-cancel-farm">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Contact Modal -->
    <div id="contact-modal" class="modal">
        <div class="modal-content">
            <h2 id="contact-modal-title">Add New Contact</h2>
            <form id="contact-form">
                <input type="hidden" id="contact-id">
                <input type="text" id="contact-name" placeholder="Full Name" required>
                <select id="contact-category" required>
                    <option value="">Select Category</option>
                    <option value="supplier">Supplier</option>
                    <option value="customer">Customer</option>
                    <option value="veterinarian">Veterinarian</option>
                    <option value="worker">Worker</option>
                    <option value="other">Other</option>
                </select>
                <input type="tel" id="contact-phone" placeholder="Phone Number (e.g., +254 700 123 456)" required>
                <input type="email" id="contact-email" placeholder="Email Address">
                <input type="text" id="contact-location" placeholder="Location/Address">
                <textarea id="contact-services" placeholder="Services/Products offered or needed"></textarea>
                <select id="contact-status" required>
                    <option value="">Select Status</option>
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                    <option value="pending">Pending</option>
                </select>
                <textarea id="contact-notes" placeholder="Additional Notes"></textarea>
                <div class="modal-buttons">
                    <button type="submit">Save</button>
                    <button type="button" id="contact-cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Task Modal -->
    <div id="task-modal" class="modal">
        <div class="modal-content">
            <h2 id="task-modal-title">Add New Task</h2>
            <form id="task-form">
                <input type="hidden" id="task-id">
                <input type="text" id="task-title" placeholder="Task Title" required>
                <select id="task-category" required>
                    <option value="">Select Category</option>
                    <option value="feeding">Feeding</option>
                    <option value="breeding">Breeding</option>
                    <option value="health">Health</option>
                    <option value="maintenance">Maintenance</option>
                    <option value="sales">Sales</option>
                    <option value="other">Other</option>
                </select>
                <select id="task-priority" required>
                    <option value="">Select Priority</option>
                    <option value="low">Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                    <option value="urgent">Urgent</option>
                </select>
                <input type="date" id="task-due-date" required>
                <input type="text" id="task-assigned-to" placeholder="Assigned To" required>
                <textarea id="task-description" placeholder="Task Description" required></textarea>
                <select id="task-status">
                    <option value="pending">Pending</option>
                    <option value="in-progress">In Progress</option>
                    <option value="completed">Completed</option>
                </select>
                <div class="modal-buttons">
                    <button type="submit">Save</button>
                    <button type="button" id="task-cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Reminder Modal -->
    <div id="reminder-modal" class="modal">
        <div class="modal-content">
            <h2 id="reminder-modal-title">Add New Reminder</h2>
            <form id="reminder-form">
                <input type="hidden" id="reminder-id">
                <input type="text" id="reminder-title" placeholder="Reminder Title" required>
                <select id="reminder-type" required>
                    <option value="">Select Type</option>
                    <option value="breeding">Breeding</option>
                    <option value="health">Health</option>
                    <option value="feeding">Feeding</option>
                    <option value="general">General</option>
                </select>
                <input type="datetime-local" id="reminder-datetime" required>
                <input type="text" id="reminder-subject" placeholder="Related Goat/Subject">
                <textarea id="reminder-description" placeholder="Reminder Description" required></textarea>
                <select id="reminder-status">
                    <option value="active">Active</option>
                    <option value="completed">Completed</option>
                    <option value="snoozed">Snoozed</option>
                </select>
                <div class="modal-buttons">
                    <button type="submit">Save</button>
                    <button type="button" id="reminder-cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Transaction Modal -->
    <div id="transaction-modal" class="modal">
        <div class="modal-content">
            <h2 id="transaction-modal-title">Add New Transaction</h2>
            <form id="transaction-form">
                <input type="hidden" id="transaction-id">
                <input type="date" id="transaction-date" required>
                <select id="transaction-type" required>
                    <option value="">Select Type</option>
                    <option value="income">Income</option>
                    <option value="expense">Expense</option>
                </select>
                <select id="transaction-category" required>
                    <option value="">Select Category</option>
                    <!-- Income categories -->
                    <option value="goat-sales">Goat Sales</option>
                    <option value="product-sales">Product Sales</option>
                    <option value="other-income">Other Income</option>
                    <!-- Expense categories -->
                    <option value="feed">Feed</option>
                    <option value="veterinary">Veterinary</option>
                    <option value="equipment">Equipment</option>
                    <option value="utilities">Utilities</option>
                    <option value="other-expenses">Other Expenses</option>
                </select>
                <input type="text" id="transaction-description" placeholder="Description" required>
                <input type="number" id="transaction-amount" step="0.01" placeholder="Amount (KSh)" required>
                <select id="transaction-payment-method" required>
                    <option value="">Payment Method</option>
                    <option value="cash">Cash</option>
                    <option value="mpesa">M-Pesa</option>
                    <option value="bank">Bank Transfer</option>
                    <option value="cheque">Cheque</option>
                </select>
                <div class="modal-buttons">
                    <button type="submit">Save</button>
                    <button type="button" id="transaction-cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Sale Modal -->
    <div id="sale-modal" class="modal">
        <div class="modal-content">
            <h2 id="sale-modal-title">Add New Sale</h2>
            <form id="sale-form">
                <input type="hidden" id="sale-id">
                <input type="date" id="sale-date" required>
                <select id="sale-item-type" required>
                    <option value="">Select Item Type</option>
                    <option value="goats">Goat</option>
                    <option value="products">Product</option>
                </select>
                <input type="text" id="sale-item-name" placeholder="Item Name" required>
                <input type="text" id="sale-customer" placeholder="Customer Name" required>
                <input type="number" id="sale-quantity" placeholder="Quantity" required>
                <input type="number" id="sale-unit-price" step="0.01" placeholder="Unit Price (KSh)" required>
                <input type="number" id="sale-total" step="0.01" placeholder="Total (KSh)" readonly>
                <select id="sale-payment-status" required>
                    <option value="">Payment Status</option>
                    <option value="paid">Paid</option>
                    <option value="pending">Pending</option>
                    <option value="partial">Partial</option>
                </select>
                <textarea id="sale-notes" placeholder="Sale Notes"></textarea>
                <div class="modal-buttons">
                    <button type="submit">Save</button>
                    <button type="button" id="sale-cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Crop Modal -->
    <div id="crop-modal" class="modal">
        <div class="modal-content">
            <h2 id="crop-modal-title">Add New Crop</h2>
            <form id="crop-form">
                <input type="hidden" id="crop-id">
                <input type="text" id="crop-name" placeholder="Crop Name" required>
                <select id="crop-type" required>
                    <option value="">Select Type</option>
                    <option value="feed">Feed Crop</option>
                    <option value="pasture">Pasture</option>
                    <option value="other">Other</option>
                </select>
                <input type="number" id="crop-area" step="0.01" placeholder="Area (acres)" required>
                <input type="date" id="crop-planting-date" required>
                <input type="date" id="crop-expected-harvest">
                <select id="crop-status" required>
                    <option value="">Select Status</option>
                    <option value="planned">Planned</option>
                    <option value="planted">Planted</option>
                    <option value="growing">Growing</option>
                    <option value="harvested">Harvested</option>
                </select>
                <input type="number" id="crop-yield" step="0.01" placeholder="Yield (kg)">
                <textarea id="crop-notes" placeholder="Crop Notes"></textarea>
                <div class="modal-buttons">
                    <button type="submit">Save</button>
                    <button type="button" id="crop-cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add this section to your navigation menu -->
    <nav class="sidebar">
        <!-- ...existing menu items... -->
        <button class="nav-btn" onclick="showSection('tax-section')">
            <i class="icon">🇰🇪</i> Kenya Tax Filing
        </button>
        <!-- ...existing menu items... -->
    </nav>

    <!-- Add this section to your main content area -->
    <section id="tax-section" class="content-section">
        <div class="section-header">
            <h2>🇰🇪 Kenya Tax Filing & Compliance</h2>
            <p>Manage your farm's tax obligations according to Kenya Revenue Authority (KRA) requirements</p>
        </div>

        <!-- Tax Dashboard -->
        <div class="tax-dashboard">
            <div class="tax-summary-cards">
                <div class="tax-card monthly">
                    <h3>This Month Tax Due</h3>
                    <p class="tax-amount" id="monthly-tax-due">KSh 0</p>
                    <small>Current month obligation</small>
                </div>
                <div class="tax-card yearly">
                    <h3>This Year Tax Paid</h3>
                    <p class="tax-amount" id="yearly-tax-paid">KSh 0</p>
                    <small>Year-to-date payments</small>
                </div>
                <div class="tax-card filing">
                    <h3>Next Filing Due</h3>
                    <p class="tax-date" id="next-filing-date">-</p>
                    <small>20th of each month</small>
                </div>
                <div class="tax-card compliance">
                    <h3>Compliance Status</h3>
                    <p class="compliance-status compliant" id="compliance-status">COMPLIANT</p>
                    <small>KRA compliance</small>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="tax-actions-bar">
            <button class="btn btn-primary" onclick="farmRecords.showTaxFilingModal()">
                📋 File Tax Return
            </button>
            <button class="btn btn-secondary" onclick="farmRecords.generateTaxReport('current-month')">
                📊 Monthly Report
            </button>
            <button class="btn btn-secondary" onclick="farmRecords.generateTaxReport('current-year')">
                📈 Annual Report
            </button>
            <button class="btn btn-info" onclick="farmRecords.showTaxCalendar()">
                📅 Tax Calendar
            </button>
        </div>

        <!-- Tax Information Tabs -->
        <div class="tax-tabs">
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showTaxTab('obligations')">Tax Obligations</button>
                <button class="tab-btn" onclick="showTaxTab('returns')">Filed Returns</button>
                <button class="tab-btn" onclick="showTaxTab('calendar')">Tax Calendar</button>
                <button class="tab-btn" onclick="showTaxTab('settings')">Tax Settings</button>
            </div>

            <!-- Tax Obligations Tab -->
            <div id="tax-tab-obligations" class="tax-tab-content active">
                <div class="tax-obligations-section">
                    <h3>Current Tax Obligations</h3>
                    <div class="obligation-cards">
                        <div class="obligation-card turnover-tax">
                            <h4>Turnover Tax (3%)</h4>
                            <p class="obligation-amount" id="turnover-tax-amount">KSh 0</p>
                            <p class="obligation-description">Applied to gross turnover for businesses with annual turnover between KSh 1M - 50M</p>
                            <div class="obligation-details">
                                <p><strong>Due Date:</strong> 20th of each month</p>
                                <p><strong>Filing:</strong> iTax portal</p>
                                <p><strong>Applicable:</strong> Agricultural businesses</p>
                            </div>
                        </div>
                        
                        <div class="obligation-card vat">
                            <h4>Value Added Tax (16%)</h4>
                            <p class="obligation-amount" id="vat-amount">KSh 0</p>
                            <p class="obligation-description">Applied to taxable supplies (non-agricultural products/services)</p>
                            <div class="obligation-details">
                                <p><strong>Registration Threshold:</strong> KSh 5M annual turnover</p>
                                <p><strong>Agricultural Exemption:</strong> Most farm produce is VAT exempt</p>
                                <p><strong>Filing:</strong> Monthly VAT returns</p>
                            </div>
                        </div>
                        
                        <div class="obligation-card withholding">
                            <h4>Withholding Tax (5%)</h4>
                            <p class="obligation-amount" id="withholding-amount">KSh 0</p>
                            <p class="obligation-description">May apply on sales to registered businesses above KSh 24,000</p>
                            <div class="obligation-details">
                                <p><strong>Rate:</strong> 5% for agricultural produce</p>
                                <p><strong>Threshold:</strong> Transactions above KSh 24,000</p>
                                <p><strong>Withheld by:</strong> Purchasing business</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tax-exemptions-info">
                        <h4>🌾 Agricultural Tax Exemptions in Kenya</h4>
                        <div class="exemption-list">
                            <div class="exemption-item">
                                <strong>VAT Exempt:</strong> Unprocessed agricultural produce, livestock, milk, eggs
                            </div>
                            <div class="exemption-item">
                                <strong>Income Tax Relief:</strong> Agricultural income may qualify for certain reliefs
                            </div>
                            <div class="exemption-item">
                                <strong>Zero Rating:</strong> Agricultural exports are zero-rated for VAT
                            </div>
                            <div class="exemption-item">
                                <strong>Small Scale:</strong> Farmers with turnover below KSh 1M may be exempt from turnover tax
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filed Returns Tab -->
            <div id="tax-tab-returns" class="tax-tab-content">
                <div class="returns-section">
                    <h3>Filed Tax Returns</h3>
                    <div id="tax-records" class="tax-records-container">
                        <!-- Tax records will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Tax Calendar Tab -->
            <div id="tax-tab-calendar" class="tax-tab-content">
                <div class="calendar-section">
                    <h3>Kenya Tax Calendar 2025</h3>
                    <div id="tax-calendar" class="tax-calendar-container">
                        <!-- Tax calendar will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Tax Settings Tab -->
            <div id="tax-tab-settings" class="tax-tab-content">
                <div class="settings-section">
                    <h3>Tax Configuration</h3>
                    <form id="tax-settings-form" class="tax-settings-form">
                        <div class="form-section">
                            <h4>Business Information</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="kra-pin">KRA PIN *</label>
                                    <input type="text" id="kra-pin" name="kra-pin" placeholder="P051234567B" required>
                                    <small>Your Kenya Revenue Authority PIN</small>
                                </div>
                                <div class="form-group">
                                    <label for="business-name">Business Name *</label>
                                    <input type="text" id="business-name" name="business-name" value="The Mountain Goat Farm" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="business-type">Business Type</label>
                                    <select id="business-type" name="business-type">
                                        <option value="agricultural-production">Agricultural Production</option>
                                        <option value="livestock-farming">Livestock Farming</option>
                                        <option value="dairy-farming">Dairy Farming</option>
                                        <option value="mixed-farming">Mixed Farming</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="registration-date">Business Registration Date</label>
                                    <input type="date" id="registration-date" name="registration-date">
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h4>Tax Obligations</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="tax-obligation">Primary Tax Obligation</label>
                                    <select id="tax-obligation" name="tax-obligation">
                                        <option value="turnover-tax">Turnover Tax (3%)</option>
                                        <option value="vat">VAT Registered (16%)</option>
                                        <option value="income-tax">Income Tax</option>
                                        <option value="exempt">Tax Exempt</option>
                                    </select>
                                    <small>Based on your annual turnover and business type</small>
                                </div>
                                <div class="form-group">
                                    <label for="filing-frequency">Filing Frequency</label>
                                    <select id="filing-frequency" name="filing-frequency">
                                        <option value="monthly">Monthly</option>
                                        <option value="quarterly">Quarterly</option>
                                        <option value="annually">Annually</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h4>Tax Agent (Optional)</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="agent-name">Tax Agent Name</label>
                                    <input type="text" id="agent-name" name="agent-name" placeholder="Agent/Accountant name">
                                </div>
                                <div class="form-group">
                                    <label for="agent-pin">Agent PIN</label>
                                    <input type="text" id="agent-pin" name="agent-pin" placeholder="Agent's KRA PIN">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="agent-contact">Agent Contact</label>
                                    <input type="text" id="agent-contact" name="agent-contact" placeholder="Phone/Email">
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">💾 Save Tax Settings</button>
                            <button type="button" class="btn btn-secondary" onclick="farmRecords.resetTaxSettings()">🔄 Reset to Default</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Tax Filing Modal -->
    <div id="tax-filing-modal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>📋 File Tax Return</h3>
                <span class="close" onclick="farmRecords.hideTaxFilingModal()">&times;</span>
            </div>
            <form id="tax-filing-form" onsubmit="event.preventDefault(); farmRecords.processTaxFiling();">
                
                <div class="form-section">
                    <h4>Return Information</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="filing-tax-type">Tax Type *</label>
                            <select id="filing-tax-type" name="tax-type" required>
                                <option value="turnover-tax">Turnover Tax Return</option>
                                <option value="vat">VAT Return</option>
                                <option value="income-tax">Income Tax Return</option>
                                <option value="withholding-tax">Withholding Tax Return</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="filing-period">Tax Period *</label>
                            <input type="text" id="filing-period" name="period" required readonly>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="filing-amount">Tax Amount (KSh) *</label>
                            <input type="number" id="filing-amount" name="amount" step="0.01" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="filing-status">Filing Status *</label>
                            <select id="filing-status" name="status" required>
                                <option value="filed">Filed</option>
                                <option value="paid">Filed & Paid</option>
                                <option value="pending">Pending Payment</option>
                                <option value="nil">Nil Return</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h4>Payment Details</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="filing-reference">Payment Reference</label>
                            <input type="text" id="filing-reference" name="reference" placeholder="iTax reference or payment slip number">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="filing-notes">Notes</label>
                            <textarea id="filing-notes" name="notes" rows="3" placeholder="Additional notes about this filing"></textarea>
                        </div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">📋 Record Filing</button>
                    <button type="button" class="btn btn-secondary" onclick="farmRecords.hideTaxFilingModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script src="farm-records.js"></script>
</body>
</html>
